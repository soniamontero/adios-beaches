<div class="form-container">
  <div class="minimal-form">
    <%= simple_form_for @experience do |f| %>
    <div class="photo-input" id="photo_input">
      <label class="photo-uploader" id="DefaultImagePreview">
        <i class='fas fa-camera-retro pb-2'></i>
        Add a photo
        <span style='display: none'>
          <%= f.input :photo %>
        </span>
      </label>
    </div>
      <%= f.input :photo_cache, as: :hidden %>
      <%= f.association :category, label_method: :name, selected: 'Food' %>
      <%= f.input :name, placeholder: "ex: Diving at Penida with Dive Concepts", label: 'Spot short description' %>
      <%= f.input :address, placeholder: "Try to type 'The Lawn'", label: "Name of the point of interest (or address)" %>
      <%= f.input :price_range, as: :radio_buttons, collection: Experience.price_ranges.keys.map {|key| [key.humanize, key]} %>
      <%= f.input :price, placeholder: 'In IDR (optional)', label: "Average Price" %>
      <%= f.input :details, input_html: {rows: 5}, placeholder: "How was your experience? What did you most enjoy? Would you recommend it? Summarize your visit or highlight an interesting detail." %>
      <%= f.submit "Submit", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<!-- <script>
  const nameInput = document.querySelector("#experience_name")
  const charactersLeft = document.querySelector("#number-of-characters")
  nameInput.addEventListener('keyup', (event) => {
    const number = nameInput.value.length
    if (number <= 45) {
      charactersLeft.innerHTML = "";
      charactersLeft.insertAdjacentHTML('afterbegin', `${45 - number} characters left.`)
    } else {
      charactersLeft.innerHTML = "";
      charactersLeft.insertAdjacentHTML('afterbegin', `${number - 45} characters too many.`)
    }
  })
</script> -->

<!-- <script>
  const getFileName = (event) => {
    let f = event.currentTarget.value;
    f = f.replace(/.*[\/\\]/, '');
    return f;
  }
  photo = document.querySelector('#experience_photo');
  photo.addEventListener('change', (e)=>{
    let fileName = getFileName(e)
    photoInput = document.querySelector('#photo_input')
    photoInput.insertAdjacentHTML('afterend', `<div class='file-name'>${fileName}</div>`)
  });

</script> -->
